{"version":3,"sources":["src/typing.js","src/util.js"],"names":["DEFAULT_SETTINGS","sentences","caretChar","caretClass","ignoreContent","ignorePrefix","typeDelay","sentenceDelay","humanize","onType","undefined","onBackspace","onFinish","onSentenceFinish","Typing","new","selector","options","elements","document","querySelectorAll","withElements","settings","Array","prototype","map","call","el","initialText","textContent","content","createElement","className","caret","innerHTML","appendChild","sentencesLeft","slice","typeSentence","typer","current","isType","isBackspace","isDone","this_","typeArray","humanTimeout","setTimeout","targetStr","curr","length","jQuery","$","fn","typing","get","window","merge","merged","i","arguments","obj","attr","isFunction","constructor","apply","isArray","toString","head","array","tail","strTail","str","substring","strHead","strLast","strDrop","string","n","substr","strDropTail","strIntersect","a","b","Math","min","noise","x","delta","round","random","isPrefix","prefix","target","isEmpty","makeTyper","pending","predicate","forward","prevLength","step","makePrefixTyper","commonPrefix"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA,IAAMA,gBAAgB,GAAG;AACxBC,WAAS,EAAE,CAAC,iBAAD,CADa;AAExBC,WAAS,EAAE,GAFa;AAGxBC,YAAU,EAAE,iBAHY;AAKxBC,eAAa,EAAE,KALS;AAMxBC,cAAY,EAAE,KANU;AAOxBC,WAAS,EAAE,EAPa;AAQxBC,eAAa,EAAE,GARS;AASxBC,UAAQ,EAAE,IATc;AAWxBC,QAAM,EAAEC,SAXgB;AAYxBC,aAAW,EAAED,SAZW;AAaxBE,UAAQ,EAAEF,SAbc;AAcxBG,kBAAgB,EAAEH;AAdM,CAAzB;AAiBA,IAAMI,MAAM,GAAG;AACdC,KAAG,EAAE,cAASC,QAAT,EAAmBC,OAAnB,EAA4B;AAChC,QAAMC,QAAQ,GAAGC,QAAQ,CAACC,gBAAT,CAA0BJ,QAA1B,CAAjB;AACA,SAAKK,YAAL,CAAkBH,QAAlB,EAA4BD,OAA5B;AACA,GAJa;AAMdI,cAAY,EAAE,sBAASH,QAAT,EAAmBD,OAAnB,EAA4B;AACzC;AACA,QAAMK,QAAQ,GAAG,iBAAMtB,gBAAN,EAAwBiB,OAAxB,CAAjB;AAEAM,SAAK,CAACC,SAAN,CAAgBC,GAAhB,CAAoBC,IAApB,CAAyBR,QAAzB,EAAmC,UAAAS,EAAE,EAAI;AACxC;AACA,UAAMC,WAAW,GAAGN,QAAQ,CAAClB,aAAT,GAAyB,EAAzB,GAA8BuB,EAAE,CAACE,WAArD;AAEA,UAAMC,OAAO,GAAGX,QAAQ,CAACY,aAAT,CAAuB,MAAvB,CAAhB;AACAD,aAAO,CAACE,SAAR,GAAoB,mBAApB;AACAF,aAAO,CAACD,WAAR,GAAsBD,WAAtB;AAEA,UAAMK,KAAK,GAAGd,QAAQ,CAACY,aAAT,CAAuB,OAAvB,CAAd;AACAE,WAAK,CAACD,SAAN,GAAkBV,QAAQ,CAACnB,UAA3B;AACA8B,WAAK,CAACJ,WAAN,GAAoBP,QAAQ,CAACpB,SAA7B;AAEAyB,QAAE,CAACO,SAAH,GAAe,EAAf;AACAP,QAAE,CAACQ,WAAH,CAAeL,OAAf;AACAH,QAAE,CAACQ,WAAH,CAAeF,KAAf,EAdwC,CAgBxC;;AACA,UAAIG,aAAa,GAAGd,QAAQ,CAACrB,SAAT,CAAmBoC,KAAnB,EAApB;;AAEA,eAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC5B;AAD4B,qBAEmBA,KAAK,EAFxB;AAAA,YAErBC,OAFqB,UAErBA,OAFqB;AAAA,YAEZC,MAFY,UAEZA,MAFY;AAAA,YAEJC,WAFI,UAEJA,WAFI;AAAA,YAESC,MAFT,UAESA,MAFT;;AAI5Bb,eAAO,CAACD,WAAR,GAAsBW,OAAtB;;AAEA,YAAIG,MAAJ,EAAY;AACX,cAAI,sBAAWrB,QAAQ,CAACT,gBAApB,CAAJ,EACCS,QAAQ,CAACT,gBAAT,CAA0Ba,IAA1B,CAA+BkB,KAA/B;AACDC,mBAAS;AACT,SAJD,MAIO;AACN;AACA,cAAIJ,MAAM,IAAI,sBAAWnB,QAAQ,CAACb,MAApB,CAAd,EACCa,QAAQ,CAACb,MAAT,CAAgBiB,IAAhB,CAAqBkB,KAArB;AACD,cAAIF,WAAW,IAAI,sBAAWpB,QAAQ,CAACX,WAApB,CAAnB,EACCW,QAAQ,CAACX,WAAT,CAAqBe,IAArB,CAA0BkB,KAA1B,EALK,CAON;;AACA,cAAIE,YAAY,GAAGxB,QAAQ,CAAChB,SAA5B;AACA,cAAIgB,QAAQ,CAACd,QAAb,EACCsC,YAAY,GAAG,iBAAMxB,QAAQ,CAAChB,SAAf,EAA0BgB,QAAQ,CAAChB,SAAnC,CAAf;AACDyC,oBAAU,CAACT,YAAD,EAAeQ,YAAf,EAA6BP,KAA7B,CAAV;AACA;AACD;;AAED,eAASM,SAAT,GAAqB;AACpB,YAAIG,SAAS,GAAG,gBAAKZ,aAAL,CAAhB;AACAA,qBAAa,GAAG,gBAAKA,aAAL,CAAhB;;AACA,YAAIY,SAAS,KAAKtC,SAAlB,EAA6B;AAC5B,cAAI6B,KAAK,GAAG,2BAAgBT,OAAO,CAACD,WAAxB,EAAqCmB,SAArC,CAAZ;;AACA,cAAI1B,QAAQ,CAACjB,YAAb,EAA2B;AAC1BkC,iBAAK,GAAG,qBAAUT,OAAO,CAACD,WAAlB,EAA+BmB,SAA/B,EAA0C,UAAAC,IAAI;AAAA,qBAAIA,IAAI,CAACC,MAAL,IAAe,CAAnB;AAAA,aAA9C,CAAR;AACA;;AACDH,oBAAU,CAACT,YAAD,EAAehB,QAAQ,CAACf,aAAxB,EAAuCgC,KAAvC,CAAV;AACA,SAND,MAOK,IAAI,sBAAWjB,QAAQ,CAACV,QAApB,CAAJ,EAAmC;AACvCU,kBAAQ,CAACV,QAAT,CAAkBc,IAAlB,CAAuBkB,KAAvB;AACA;AACD;;AAEDC,eAAS;AACT,KA5DD;AA6DA;AAvEa,CAAf;;AA0EA,IAAI,OAAOM,MAAP,IAAiB,WAArB,EAAkC;AACjC,GAAC,UAASC,CAAT,EAAY;AACZA,KAAC,CAACC,EAAF,CAAKC,MAAL,GAAc,UAASrC,OAAT,EAAkB;AAC/BH,YAAM,CAACO,YAAP,CAAoB,KAAKkC,GAAL,EAApB,EAAgCtC,OAAhC;AACA,KAFD;AAGA,GAJD,EAIGkC,MAJH;AAKA;;AAEDK,MAAM,CAAC1C,MAAP,GAAgBA,MAAhB;eACeA,M;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtGf;AACO,SAAS2C,KAAT,GAAiB;AACvB,MAAMC,MAAM,GAAG,EAAf;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACV,MAA9B,EAAsCS,CAAC,EAAvC,EAA2C;AAC1C,QAAME,GAAG,GAAGD,SAAS,CAACD,CAAD,CAArB;;AACA,SAAK,IAAIG,IAAT,IAAiBD,GAAjB,EAAsB;AAAEH,YAAM,CAACI,IAAD,CAAN,GAAeD,GAAG,CAACC,IAAD,CAAlB;AAA2B;AACnD;;AACD,SAAOJ,MAAP;AACA,C,CAED;;;AACO,SAASK,UAAT,CAAoBF,GAApB,EAAyB;AAC/B,SAAO,CAAC,EAAEA,GAAG,IAAIA,GAAG,CAACG,WAAX,IAA0BH,GAAG,CAACnC,IAA9B,IAAsCmC,GAAG,CAACI,KAA5C,CAAR;AACA,C,CAED;;;AACO,SAASC,OAAT,CAAiBL,GAAjB,EAAsB;AAC5B,SAAOM,QAAQ,CAACN,GAAD,CAAR,KAAkB,gBAAzB;AACA,C,CAED;;;AACO,SAASO,IAAT,CAAcC,KAAd,EAAqB;AAC3B,SAAOA,KAAK,CAAC,CAAD,CAAZ;AACA,C,CAED;;;AACO,SAASC,IAAT,CAAcD,KAAd,EAAqB;AAC3B,SAAOA,KAAK,CAAChC,KAAN,CAAY,CAAZ,CAAP;AACA,C,CAED;;;AACO,SAASkC,OAAT,CAAiBC,GAAjB,EAAsB;AAC5B,SAAOA,GAAG,CAACC,SAAJ,CAAc,CAAd,EAAiBD,GAAG,CAACtB,MAArB,CAAP;AACA,C,CAED;;;AACO,SAASwB,OAAT,CAAiBF,GAAjB,EAAsB;AAC5B,SAAOA,GAAG,CAAC,CAAD,CAAV;AACA,C,CAED;;;AACO,SAASG,OAAT,CAAiBH,GAAjB,EAAsB;AAC5B,SAAOA,GAAG,CAACA,GAAG,CAACtB,MAAJ,GAAa,CAAd,CAAV;AACA,C,CAED;;;AACO,SAAS0B,OAAT,CAAiBC,MAAjB,EAAyBC,CAAzB,EAA4B;AAClC,SAAOD,MAAM,CAACE,MAAP,CAAcD,CAAd,EAAiBD,MAAM,CAAC3B,MAAxB,CAAP;AACA,C,CAED;;;AACO,SAAS8B,WAAT,CAAqBH,MAArB,EAA6BC,CAA7B,EAAgC;AACtC,SAAOD,MAAM,CAACE,MAAP,CAAc,CAAd,EAAiBF,MAAM,CAAC3B,MAAP,GAAgB4B,CAAjC,CAAP;AACA,C,CAED;;;AACO,SAASG,YAAT,CAAsBC,CAAtB,EAAyBC,CAAzB,EAA4B;AAClC,MAAIxB,CAAJ;;AACA,OAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGyB,IAAI,CAACC,GAAL,CAASH,CAAC,CAAChC,MAAX,EAAmBiC,CAAC,CAACjC,MAArB,CAAhB,EAA8CS,CAAC,EAA/C,EAAmD;AAClD,QAAIuB,CAAC,CAACvB,CAAD,CAAD,IAAQwB,CAAC,CAACxB,CAAD,CAAb,EAAkB;AAClB;;AACD,SAAOuB,CAAC,CAACH,MAAF,CAAS,CAAT,EAAYpB,CAAZ,CAAP;AACA,C,CAED;AACA;;;AACO,SAAS2B,KAAT,CAAeC,CAAf,EAAkBC,KAAlB,EAAyB;AAC/B,SAAOJ,IAAI,CAACK,KAAL,CAAWL,IAAI,CAACM,MAAL,KAAgBF,KAAhB,GAAwB,CAAxB,GAA4BA,KAAvC,IAAgDD,CAAvD;AACA,C,CAED;;;AACO,SAASI,QAAT,CAAkBC,MAAlB,EAA0BC,MAA1B,EAAkC;AACxC,SAAOA,MAAM,CAACd,MAAP,CAAc,CAAd,EAAiBa,MAAM,CAAC1C,MAAxB,KAAmC0C,MAA1C;AACA,C,CAED;;;AACO,SAASE,OAAT,CAAiBjB,MAAjB,EAAyB;AAC/B,SAAOA,MAAM,CAAC3B,MAAP,IAAiB,CAAxB;AACA,C,CAED;AACA;AACA;AACA;;;AACO,SAAS6C,SAAT,CAAmBvD,OAAnB,EAA4BwD,OAA5B,EAAqCC,SAArC,EAAgD;AACtD,MAAIC,OAAO,GAAG1D,OAAO,CAACU,MAAR,IAAkB,CAAlB,IAAuB+C,SAAS,CAACzD,OAAD,EAAUwD,OAAV,CAA9C;AACA,MAAIG,UAAU,GAAG3D,OAAO,CAACU,MAAzB;AACA,SAAO,YAAW;AACjB,QAAMkD,IAAI,GAAG;AACZ5D,aAAO,EAAEA,OADG;AAEZwD,aAAO,EAAEA,OAFG;AAGZvD,YAAM,EAAED,OAAO,CAACU,MAAR,GAAiBiD,UAHb;AAIZzD,iBAAW,EAAEF,OAAO,CAACU,MAAR,GAAiBiD,UAJlB;AAKZxD,YAAM,EAAEuD,OAAO,IAAIF,OAAO,CAAC9C,MAAR,IAAkB;AALzB,KAAb;AAQAiD,cAAU,GAAG3D,OAAO,CAACU,MAArB;;AACA,QAAIgD,OAAO,IAAIF,OAAO,CAAC9C,MAAR,GAAiB,CAAhC,EAAmC;AAClCV,aAAO,GAAGA,OAAO,GAAG4B,IAAI,CAAC4B,OAAD,CAAxB;AACAA,aAAO,GAAG1B,IAAI,CAAC0B,OAAD,CAAd;AACA,KAHD,MAGO,IAAI,CAACE,OAAD,IAAY1D,OAAO,CAACU,MAAR,GAAiB,CAAjC,EAAoC;AAC1CV,aAAO,GAAGwC,WAAW,CAACxC,OAAD,EAAU,CAAV,CAArB;AACA;;AACD0D,WAAO,GAAGA,OAAO,IAAI1D,OAAO,CAACU,MAAR,IAAkB,CAA7B,IAAkC+C,SAAS,CAACzD,OAAD,EAAUwD,OAAV,CAArD;AAEA,WAAOI,IAAP;AACA,GAnBD;AAoBA,C,CAED;AACA;;;AACO,SAASC,eAAT,CAAyB7D,OAAzB,EAAkCqD,MAAlC,EAA0C;AAChD,MAAMS,YAAY,GAAGrB,YAAY,CAACzC,OAAD,EAAUqD,MAAV,CAAjC;AACA,MAAMG,OAAO,GAAGH,MAAM,CAACd,MAAP,CAAcuB,YAAY,CAACpD,MAA3B,EAAmC2C,MAAM,CAAC3C,MAA1C,CAAhB;AACA,SAAO6C,SAAS,CAACvD,OAAD,EAAUwD,OAAV,EAAmB,UAAA/C,IAAI;AAAA,WAAIA,IAAI,IAAIqD,YAAZ;AAAA,GAAvB,CAAhB;AACA","file":"dist/typing.js","sourcesContent":["import {merge, head, tail, isFunction, noise, makePrefixTyper, makeTyper} from \"src/util\";\n\nconst DEFAULT_SETTINGS = {\n\tsentences: ['Hello typing.js'],\n\tcaretChar: '_',\n\tcaretClass: 'typingjs__caret',\n\n\tignoreContent: false,\n\tignorePrefix: false,\n\ttypeDelay: 50,\n\tsentenceDelay: 750,\n\thumanize: true,\n\n\tonType: undefined,\n\tonBackspace: undefined,\n\tonFinish: undefined,\n\tonSentenceFinish: undefined\n};\n\nconst Typing = {\n\tnew: function(selector, options) {\n\t\tconst elements = document.querySelectorAll(selector);\n\t\tthis.withElements(elements, options);\n\t},\n\n\twithElements: function(elements, options) {\n\t\t// Settings.\n\t\tconst settings = merge(DEFAULT_SETTINGS, options);\n\n\t\tArray.prototype.map.call(elements, el => {\n\t\t\t// Creates initial elements.\n\t\t\tconst initialText = settings.ignoreContent ? '' : el.textContent;\n\n\t\t\tconst content = document.createElement('span');\n\t\t\tcontent.className = 'typingjs__content';\n\t\t\tcontent.textContent = initialText;\n\n\t\t\tconst caret = document.createElement('caret');\n\t\t\tcaret.className = settings.caretClass;\n\t\t\tcaret.textContent = settings.caretChar;\n\n\t\t\tel.innerHTML = '';\n\t\t\tel.appendChild(content);\n\t\t\tel.appendChild(caret);\n\n\t\t\t// Starts progress here.\n\t\t\tvar sentencesLeft = settings.sentences.slice();\n\n\t\t\tfunction typeSentence(typer) {\n\t\t\t\t// Reads next iteration of the typing animation.\n\t\t\t\tconst {current, isType, isBackspace, isDone} = typer();\n\n\t\t\t\tcontent.textContent = current;\n\n\t\t\t\tif (isDone) {\n\t\t\t\t\tif (isFunction(settings.onSentenceFinish))\n\t\t\t\t\t\tsettings.onSentenceFinish.call(this_);\n\t\t\t\t\ttypeArray();\n\t\t\t\t} else {\n\t\t\t\t\t// Callbacks.\n\t\t\t\t\tif (isType && isFunction(settings.onType))\n\t\t\t\t\t\tsettings.onType.call(this_);\n\t\t\t\t\tif (isBackspace && isFunction(settings.onBackspace))\n\t\t\t\t\t\tsettings.onBackspace.call(this_);\n\n\t\t\t\t\t// Next step\n\t\t\t\t\tvar humanTimeout = settings.typeDelay;\n\t\t\t\t\tif (settings.humanize)\n\t\t\t\t\t\thumanTimeout = noise(settings.typeDelay, settings.typeDelay);\n\t\t\t\t\tsetTimeout(typeSentence, humanTimeout, typer);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction typeArray() {\n\t\t\t\tvar targetStr = head(sentencesLeft);\n\t\t\t\tsentencesLeft = tail(sentencesLeft);\n\t\t\t\tif (targetStr !== undefined) {\n\t\t\t\t\tvar typer = makePrefixTyper(content.textContent, targetStr);\n\t\t\t\t\tif (settings.ignorePrefix) {\n\t\t\t\t\t\ttyper = makeTyper(content.textContent, targetStr, curr => curr.length == 0);\n\t\t\t\t\t}\n\t\t\t\t\tsetTimeout(typeSentence, settings.sentenceDelay, typer);\n\t\t\t\t}\n\t\t\t\telse if (isFunction(settings.onFinish)) {\n\t\t\t\t\tsettings.onFinish.call(this_);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttypeArray();\n\t\t});\n\t}\n};\n\nif (typeof jQuery != 'undefined') {\n\t(function($) {\n\t\t$.fn.typing = function(options) {\n\t\t\tTyping.withElements(this.get(), options);\n\t\t};\n\t})(jQuery);\n}\n\nwindow.Typing = Typing;\nexport default Typing;\n\n","// Merges two objects.\nexport function merge() {\n\tconst merged = {};\n\tfor (var i = 0; i < arguments.length; i++) {\n\t\tconst obj = arguments[i];\n\t\tfor (var attr in obj) { merged[attr] = obj[attr]; }\n\t}\n\treturn merged;\n}\n\n// Checks if the given object is a function. Taken from underscorejs source code.\nexport function isFunction(obj) {\n\treturn !!(obj && obj.constructor && obj.call && obj.apply);\n}\n\n// Checks if the given object is an array.\nexport function isArray(obj) {\n\treturn toString(obj) === \"[object Array]\";\n}\n\n// Returns the first element of the array.\nexport function head(array) {\n\treturn array[0];\n}\n\n// Returns the same array skipping the first element.\nexport function tail(array) {\n\treturn array.slice(1);\n}\n\n// Drops the first character of the string and returns the rest.\nexport function strTail(str) {\n\treturn str.substring(1, str.length);\n}\n\n// Returns the first character of the string.\nexport function strHead(str) {\n\treturn str[0];\n}\n\n// Return the last character of the string.\nexport function strLast(str) {\n\treturn str[str.length - 1];\n}\n\n// Drops the given number of characters from the start of the string.\nexport function strDrop(string, n) {\n\treturn string.substr(n, string.length);\n}\n\n// Drops the given number of characters from the end of the string\nexport function strDropTail(string, n) {\n\treturn string.substr(0, string.length - n);\n}\n\n// Intersects the start of two strings.\nexport function strIntersect(a, b) {\n\tvar i;\n\tfor (i = 0; i < Math.min(a.length, b.length); i++) {\n\t\tif (a[i] != b[i]) break;\n\t}\n\treturn a.substr(0, i);\n}\n\n// Returns the original value with the given noise applied.\n// E.g. noise(x, 2) = x - 2 <= y <= x + 2\nexport function noise(x, delta) {\n\treturn Math.round(Math.random() * delta * 2 - delta) + x;\n}\n\n// Checks if the given prefix is prefix of target.\nexport function isPrefix(prefix, target) {\n\treturn target.substr(0, prefix.length) == prefix;\n}\n\n// Checks if the given string has length zero.\nexport function isEmpty(string) {\n\treturn string.length == 0;\n}\n\n// Creates a typer that deletes characters each time it\n// is called until predicate is true. After that, it appends\n// the characters of the given string one by one each time\n// it is called.\nexport function makeTyper(current, pending, predicate) {\n\tvar forward = current.length == 0 || predicate(current, pending);\n\tvar prevLength = current.length;\n\treturn function() {\n\t\tconst step = {\n\t\t\tcurrent: current,\n\t\t\tpending: pending,\n\t\t\tisType: current.length > prevLength,\n\t\t\tisBackspace: current.length < prevLength,\n\t\t\tisDone: forward && pending.length <= 0\n\t\t};\n\n\t\tprevLength = current.length;\n\t\tif (forward && pending.length > 0) {\n\t\t\tcurrent = current + head(pending);\n\t\t\tpending = tail(pending);\n\t\t} else if (!forward && current.length > 0) {\n\t\t\tcurrent = strDropTail(current, 1);\n\t\t}\n\t\tforward = forward || current.length == 0 || predicate(current, pending);\n\n\t\treturn step;\n\t};\n}\n\n// Creates a typer that deletes characters until current is a prefix\n// of target.\nexport function makePrefixTyper(current, target) {\n\tconst commonPrefix = strIntersect(current, target);\n\tconst pending = target.substr(commonPrefix.length, target.length);\n\treturn makeTyper(current, pending, curr => curr == commonPrefix);\n}\n"]}